## ビジネスメタをオントロジーで書く - Part 3

### エンティティと属性の類型

まずはOld SchoolなRDBモデリングのお作法として、エンティティをマスタやトランザクションなどに分類したい。何も特別なことではない。勘定科目がP/L勘定やB/S勘定などに分けられているのと同じである。「分ける」から「分かる」とはよく言ったもので、知的生物たる人間の本能のようなものである。Geminiとも相談して、以下のような分類をオントロジーに含めることにする。

|Architype|Description|
|---|---|
|リソース (Resource)|主語または目的語となる名詞の集合。顧客、従業員、商品など。|
|イベント (Event)|時間と共に発生する状態変化の記録。受注や出荷。|
|分類 (Classification)|MECEな概念の集合。国、都道府県、ステータス、勘定科目など。|
|ルール (Rule)|振る舞いを規定するための複数の概念のあらかじめ定められた組み合わせ。値引きルール、返品ルールなど。|
| サマリ (Summary)|別のデータセットから導出された集計結果。総勘定元帳など。|
|関連 (Association)|複数のエンティティ間の関係についての事実。営業テリトリーと営業員など。|

テーブル属性も同様に分類を考えてみる。

|SemanticType|Description|
|---|---|
|識別子 (ID)|リソースのキー|
|連番 (Sequence)|イベントのキー|
|区分値 (Classifier)|分類のキー|
|列挙子 (Enum)|分類テーブルがない (リテラル) 区分値|
|フラグ (Flag)|区分値または列挙子のうち、特に真偽二値のみのもの|
|名称 (Name)|識別子または区分値の名称|
|数値 (NumValue)|単位を伴い計算可能な、時刻・時間以外の数値|
|時刻 (TimeStamp)|時間軸上の一点を示す値|
|時間 (Duration)|時間軸上の二点間の間隔を示す値|
|短文字列 (ShortText)|汎用的な短い文字列|
|長文字列 (LongText)|自由記述の文章|
|定型文字列 (FormattedText)|特定の様式を伴う文字列|
|住所文字列 (AddressComponent)|住所を構成する文字要素|
|バイナリ (Binary)|画像・音声などのバイナリデータ|

これらをOWLのアノテーション・プロパティとして[オントロジーファイルに追加](https://github.com/Yoshiyuki-iasa/northwind/blob/main/northwind_ontology_pt3.ttl)する。今回は初回なのでGeminiのお世話になったが、一度決めてしまえばこの部分は前回の「素の」オントロジーファイルに追記するだけ、つまりここまで機械任せで一気通貫である。

お気づきかと思うが、オントロジーの良いところは、ビジネスメタをファイルひとつにまとめられることだ。あちこちドキュメントを探し回る必要がない。これこそデータカタログに求められる美徳ではないか。

### 「類型」がなぜ要るのか

ところで類型はなぜ必要なのか。それは「ビジネスメタを書く手がかりになる」からである。何を書いたらビジネスメタになるのかが分からないと、データカタログの導入も初手で躓くことになる。それは避けなければならない。

ビジネスメタは要するに定義だが、定義すること自体にそもそも慣れていない人も多いのである。しかし、実はものごとを定義することはそんなに難しいことではない。「視点」と「起点」とを持てば定義は書ける。

ものごとの定義に必要な「視点」とは「抽象・具象」である (念のためだが、バイナリオプションではなく相対比較であるという認識は常識として共有されているものとする)。「類型」はエンティティや属性の「抽象化」である。これを「起点」として、説明対象となる個々のエンティティや属性に固有の「特徴」を付け加えれば、それが定義になる。つまり、

書きたいビジネスメタ (具象) ＝ 類型 (抽象) ＋ 特徴

である。具象から特徴を抜けば抽象になるが、それを全ての具象概念に対して行うのは大変だし、そもそもビジネスのコンテキストに存在するコンセプトが無限にあるわけもないので、それらを程よく抽象化された「類型」として提供するわけである。

JTCでたまに見られるような、「誰が」言ったかが重要視される企業風土では、こういった基本的なお作法さえも身に着ける機会がない。なのでたまたま定義を書く機会が有っても、以下のような「ビジネスメタのアンチパターン」が頻出する。

- 具象を具象のまま説明： 「{専門用語a}とは{専門用語b}である」- 書いた本人の内面的認知そのまま
- 同語反復： 「{概念a}は{様々な説明}であるところの{概念a}である」- 主語と述語の語彙 (=抽象度) が同じ
- 単なる言い換え： 「{概念a}は{概念a'}である」- 上記の亜種 (別の語彙を用いるが抽象度が同じ)
- 形容詞や副詞で終わる： 「何々する」 「重要である」- それ自体は何なのかを言わない
 
かつての「モノ作り日本」のような「具象の世界 ("Material World")」での成功体験が邪魔しているのか、はたまた語順として主語と述語が離れている、といった日本語の問題なのか、抽象表現が元々苦手な理由は様々だろう。

しかしそれはチャンスと捉えることも出来る。データカタログやビジネスメタを通じて抽象化能力の向上を図る機会である。DXやデータドリブンどころか、そもそもITは抽象化の上に成り立っている。ビジネスメタを書くことは、これまで主に具象すなわち「有形の物質的価値」の提供に勤しんできた日本のビジネスが、これからより多くの「無形の意味的価値」を提供する上で必要な、抽象化能力という基礎体力向上のための筋トレのようなものである。

(Part4に続く)
